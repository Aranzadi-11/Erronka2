package trivialariketa;

import java.util.Scanner;

// Clase que gestiona la estructura y el flujo del juego
public class JokoarenEgitura {
    private Galdera[] galderak; // Array que almacena las preguntas del trivial
    private int puntuazioa; // Puntuación del jugador

    // Constructor que inicializa el juego
    public JokoarenEgitura() {
        galderak = new Galdera[10]; // Inicializa el array de preguntas con capacidad para 10
        puntuazioa = 0; // Inicializa la puntuación a 0
        galderakPrestatu(); // Prepara las preguntas
    }

    // Método para preparar las preguntas y sus respuestas
    private void galderakPrestatu() {
        galderak[0] = new Galdera("Zein da Java fitxategi baten luzapena?", new String[]{".doc", ".txt", ".java"}, 2);
        galderak[1] = new Galdera("Zein da metodo nagusiaren izena Java-n?", new String[]{"start", "main", "run"}, 1);
        galderak[2] = new Galdera("Zein hitz gako erabiltzen da klase bat sortzeko?", new String[]{"class", "method", "object"}, 0);
        galderak[3] = new Galdera("Zein da bucle mota bat Java-n?", new String[]{"loop", "repeat", "for"}, 2);
        galderak[4] = new Galdera("Zein da datu mota zenbaki osoetarako?", new String[]{"int", "float", "boolean"}, 0);
        galderak[5] = new Galdera("Zein hitz gako erabiltzen da objektu bat sortzeko?", new String[]{"new", "create", "build"}, 0);
        galderak[6] = new Galdera("Zein metodo erabiltzen da array baten luzera lortzeko?", new String[]{"size", "length", "count"}, 1);
        galderak[7] = new Galdera("Zein da Java-n erabiltzen den IDE ezaguna?", new String[]{"Eclipse", "Word", "Photoshop"}, 0);
        galderak[8] = new Galdera("Zein da 'if' adierazpenaren helburua?", new String[]{"Baldintzak egiaztatzea", "Bucleak egitea", "Objektuak sortzea"}, 0);
        galderak[9] = new Galdera("Zein hitz gako erabiltzen da metodo bat estatikoa izateko?", new String[]{"static", "void", "final"}, 0);
    }

    // Método principal que controla el flujo del juego
    public void hasiJokoa() {
        Scanner scanner = new Scanner(System.in); // Objeto para leer la entrada del usuario
        boolean[] aukeratutakoGalderak = new boolean[galderak.length]; // Array para controlar las preguntas ya seleccionadas
        int kontagailua = 0; // Contador de preguntas respondidas

        // Bucle que asegura que se respondan 3 preguntas
        while (kontagailua < 3) {
            int random = (int) (Math.random() * galderak.length); // Selecciona una pregunta aleatoria
            if (!aukeratutakoGalderak[random]) { // Verifica si la pregunta ya ha sido seleccionada
                aukeratutakoGalderak[random] = true; // Marca la pregunta como seleccionada
                kontagailua++; // Incrementa el contador
                Galdera galdera = galderak[random]; // Obtiene la pregunta seleccionada

                boolean erantzunZuzena = false; // Variable para controlar si la respuesta es correcta
                while (!erantzunZuzena) {
                    galdera.erakutsiGaldera(); // Muestra la pregunta y las opciones
                    System.out.print("Zure erantzuna (1, 2 edo 3): "); // Solicita la respuesta

                    int erabiltzailearenErantzuna = scanner.nextInt(); // Lee la respuesta del usuario

                    if (erabiltzailearenErantzuna < 1 || erabiltzailearenErantzuna > 3) {
                        // Si la respuesta no es válida, muestra un mensaje de error
                        System.out.println();
                        System.out.println("Erantzun baliogabea. Mesedez, sartu 1, 2 edo 3.");
                    } else {
                        // Verifica si la respuesta es correcta
                        if (galdera.egiaztatuErantzuna(erabiltzailearenErantzuna)) {
                            puntuazioa++; // Incrementa la puntuación si es correcta
                            System.out.println("Zuzena!n");
                            erantzunZuzena = true; // Sale del bucle
                        } else {
                            System.out.println("Okerra!\n");
                            erantzunZuzena = true; // Sale del bucle aunque sea incorrecta
                        }
                    }
                }
            }
        }

        scanner.close(); // Cierra el scanner
        System.out.println("Jokoa amaitu da! Zure puntuazioa: " + puntuazioa + "/3"); // Muestra la puntuación final
    }
}
